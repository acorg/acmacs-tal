{"_": "-*- js-indent-level: 1 -*-",
 "init": [
  {"N": "set",
   "?report-cumulative-output": "",
   "?report-time-series-output": "",
   "whocc": false,
   "ladderize-method": "number-of-leaves"
  }
 ],
 "layout": [
  {"N": "margins", "?left": 0.1, "debug_outline": "cyan"},
  {"N": "tree", "width_to_height_ratio": 0.3, "debug_outline": true},
  {"N": "gap", "width_to_height_ratio": 0.1, "debug_outline": {"color": "green", "width": 5}},
  {"N": "tree", "debug_outline": true},
 ],
 "main": [
  {"N": "if", "condition": {"and": ["{whocc}", {"not": "{tree-has-sequences}"}]}, "then": [{"N": "seqdb", "filename": "{seqdb-filename}"}], "else": []},
  {"N": "report-cumulative", "output": "{report-cumulative-output}", "all": true},
  {"N": "report-time-series", "output": "{report-time-series-output}"},
  {"N": "ladderize", "method": "{ladderize-method}"},
  {"?N": "update-common-aa", "report": false},
  {"N": "aa-transitions", "report": false},
  {"?N": "if", "condition": {"and": ["{whocc}", "{virus-type}"]}, "then": ["clades-{virus-type}{lineage}"]},
  {"N": "if", "condition": {"and": ["{whocc}", {"not-empty": "{virus-type}"}]},
   "then": [{"N": "nodes", "select": {"vaccine": {"type": "current", "passage": "cell"}, "report": false}, "apply": "report"}]},
  {"?N": "if", "condition": {"and": ["{whocc}", "{chart-present}"]}, "then": [{"N": "nodes", "select": {"matches-chart-antigen": true}, "apply": "report"}]},
  {"?N": "if", "condition": {"and": ["{whocc}", "{chart-present}"]}, "then": [{"N": "nodes", "select": {"matches-chart-serum": "name"}, "apply": "report"}]},
  "layout"
 ]
}
